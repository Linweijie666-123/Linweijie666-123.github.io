<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é—®çœŸå…«å­—æ’ç›˜ - å›½é£å¤åˆ»ç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        /* è‡ªå®šä¹‰å›½é£é…è‰²å˜é‡ */
        :root {
            --color-red: #C41E3A;   /* æœ±çº¢ */
            --color-blue: #0F4C81;  /* é»›é’ */
            --color-gold: #D4AF37;  /* é‡‘ç®” */
            --color-bg: #F5F0E6;    /* ç±³ç™½å®£çº¸ */
            --color-wood: #2E8B57;  /* ç«¹é’ (æœ¨) */
            --color-fire: #C41E3A;  /* æœ±çº¢ (ç«) */
            --color-earth: #8B4513; /* èµ­çŸ³ (åœŸ) */
            --color-metal: #E6B422; /* è—¤é»„ (é‡‘) */
            --color-water: #0F4C81; /* é»›é’ (æ°´) */
        }
        
        body {
            font-family: 'Noto Serif SC', serif;
            background-color: #e0e0e0;
        }

        .font-shufa {
            font-family: 'Ma Shan Zheng', cursive;
        }

        /* éšè—æ»šåŠ¨æ¡ */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'z-red': '#C41E3A',
                        'z-blue': '#0F4C81',
                        'z-gold': '#D4AF37',
                        'z-bg': '#F5F0E6',
                    }
                }
            }
        }
    </script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // ==========================================
        // ç¬¬ä¸€éƒ¨åˆ†ï¼šä¸“ä¸šå‘½ç†æ ¸å¿ƒé€»è¾‘ (Core Logic)
        // ==========================================
        
        // 1. äº”è¡Œå®šä¹‰
        const WUXING = {
            'ç”²': 'æœ¨', 'ä¹™': 'æœ¨', 'ä¸™': 'ç«', 'ä¸': 'ç«', 'æˆŠ': 'åœŸ', 'å·±': 'åœŸ', 'åºš': 'é‡‘', 'è¾›': 'é‡‘', 'å£¬': 'æ°´', 'ç™¸': 'æ°´',
            'å¯…': 'æœ¨', 'å¯': 'æœ¨', 'å·³': 'ç«', 'åˆ': 'ç«', 'è¾°': 'åœŸ', 'æˆŒ': 'åœŸ', 'ä¸‘': 'åœŸ', 'æœª': 'åœŸ', 'ç”³': 'é‡‘', 'é…‰': 'é‡‘', 'äº¥': 'æ°´', 'å­': 'æ°´'
        };

        const WUXING_COLOR = {
            'æœ¨': '#2E8B57', 'ç«': '#C41E3A', 'åœŸ': '#8B4513', 'é‡‘': '#E6B422', 'æ°´': '#0F4C81'
        };

        // 2. åœ°æ”¯è—å¹²å…¨è¡¨ (æœ¬æ°”ã€ä¸­æ°”ã€ä½™æ°”)
        const ZANGGAN = {
            'å­': [{gan:'ç™¸', type:'æœ¬'}],
            'ä¸‘': [{gan:'å·±', type:'æœ¬'}, {gan:'ç™¸', type:'ä½™'}, {gan:'è¾›', type:'è—'}],
            'å¯…': [{gan:'ç”²', type:'æœ¬'}, {gan:'ä¸™', type:'ä½™'}, {gan:'æˆŠ', type:'è—'}],
            'å¯': [{gan:'ä¹™', type:'æœ¬'}],
            'è¾°': [{gan:'æˆŠ', type:'æœ¬'}, {gan:'ä¹™', type:'ä½™'}, {gan:'ç™¸', type:'è—'}],
            'å·³': [{gan:'ä¸™', type:'æœ¬'}, {gan:'æˆŠ', type:'ä½™'}, {gan:'åºš', type:'è—'}],
            'åˆ': [{gan:'ä¸', type:'æœ¬'}, {gan:'å·±', type:'è—'}],
            'æœª': [{gan:'å·±', type:'æœ¬'}, {gan:'ä¸', type:'ä½™'}, {gan:'ä¹™', type:'è—'}],
            'ç”³': [{gan:'åºš', type:'æœ¬'}, {gan:'å£¬', type:'ä½™'}, {gan:'æˆŠ', type:'è—'}],
            'é…‰': [{gan:'è¾›', type:'æœ¬'}],
            'æˆŒ': [{gan:'æˆŠ', type:'æœ¬'}, {gan:'è¾›', type:'ä½™'}, {gan:'ä¸', type:'è—'}],
            'äº¥': [{gan:'å£¬', type:'æœ¬'}, {gan:'ç”²', type:'è—'}]
        };

        // 3. åç¥æ¨å¯¼ (ä»¥æ—¥ä¸»ä¸ºæ ¸å¿ƒ)
        const TEN_GODS_RULES = {
            'åŒæˆ‘': { same: 'æ¯”è‚©', diff: 'åŠ«è´¢' },
            'ç”Ÿæˆ‘': { same: 'åå°', diff: 'æ­£å°' },
            'æˆ‘ç”Ÿ': { same: 'é£Ÿç¥', diff: 'ä¼¤å®˜' },
            'å…‹æˆ‘': { same: 'ä¸ƒæ€', diff: 'æ­£å®˜' },
            'æˆ‘å…‹': { same: 'åè´¢', diff: 'æ­£è´¢' }
        };

        // ç®€å•çš„åç¥æŸ¥æ‰¾è¡¨ (é’ˆå¯¹æœ¬æ¡ˆä¾‹æ—¥ä¸»ï¼šæˆŠåœŸ)
        const GET_TEN_GOD = (dayMaster, target) => {
            if (dayMaster !== 'æˆŠ') return 'æœªå®ç°'; // ç®€åŒ–ç‰ˆï¼Œä»…é’ˆå¯¹æ¡ˆä¾‹ï¼Œå®Œæ•´ç‰ˆéœ€æ‰©å……60ç»„åˆ
            const map = {
                'ç”²': 'ä¸ƒæ€', 'ä¹™': 'æ­£å®˜', 'ä¸™': 'åå°', 'ä¸': 'æ­£å°', 'æˆŠ': 'æ¯”è‚©',
                'å·±': 'åŠ«è´¢', 'åºš': 'é£Ÿç¥', 'è¾›': 'ä¼¤å®˜', 'å£¬': 'åè´¢', 'ç™¸': 'æ­£è´¢'
            };
            return map[target] || '';
        };

        // 4. çº³éŸ³è¡¨ (æ¡ˆä¾‹æ•°æ®)
        const NAYIN_MAP = {
            'ç”²ç”³': 'æ³‰ä¸­æ°´', 'ä¸™å¯…': 'ç‚‰ä¸­ç«', 'æˆŠå¯…': 'åŸå¤´åœŸ', 'å·±æœª': 'å¤©ä¸Šç«'
        };

        // ==========================================
        // ç¬¬äºŒéƒ¨åˆ†ï¼šReact UI ç»„ä»¶ (UI Components)
        // ==========================================

        const App = () => {
            // æ¡ˆä¾‹æ•°æ®ï¼š2004å¹´äºŒæœˆåˆå æœªæ—¶ ä¹¾é€ 
            const baziData = {
                dayMaster: 'æˆŠ', // æ—¥å…ƒ
                pillars: [
                    { name: 'å¹´æŸ±', gan: 'ç”²', zhi: 'ç”³', god: 'ä¸ƒæ€', star: 'ç—…', sit: 'ç»', kong: 'åˆæœª', shensha: ['æ–‡æ˜Œè´µäºº','ç¦æ˜Ÿè´µäºº','å¤©å¨è´µäºº','é©¿é©¬','ç©ºäº¡'] },
                    { name: 'æœˆæŸ±', gan: 'ä¸™', zhi: 'å¯…', god: 'åå°', star: 'é•¿ç”Ÿ', sit: 'é•¿ç”Ÿ', kong: 'æˆŠäº¥', shensha: ['æœˆå¾·è´µäºº','ç¦æ˜Ÿè´µäºº','å¾·ç§€è´µäºº','é©¿é©¬'] },
                    { name: 'æ—¥æŸ±', gan: 'æˆŠ', zhi: 'å¯…', god: 'å…ƒç”·', star: 'é•¿ç”Ÿ', sit: 'é•¿ç”Ÿ', kong: 'ç”³è¥¿', shensha: ['ç¦æ˜Ÿè´µäºº','å¾·ç§€è´µäºº','é˜´å·®é˜³é”™','å¤©èµ¦æ—¥','ç«¥å­ç…','é©¿é©¬'] },
                    { name: 'æ—¶æŸ±', gan: 'å·±', zhi: 'æœª', god: 'åŠ«è´¢', star: 'è¡°', sit: 'å† å¸¦', kong: 'å­ä¸‘', shensha: ['å¤©ä¹™è´µäºº','å¤ªæè´µäºº','é‡‘èˆ†','çº¢é¸¾','å¯¡å®¿','ç©ºäº¡'] },
                ]
            };

            // æ¸²æŸ“å¹²æ”¯é¢œè‰²çš„ç»„ä»¶
            const ColorText = ({ text, type = 'gan' }) => {
                const wuxing = WUXING[text];
                const color = WUXING_COLOR[wuxing];
                
                // åœ°æ”¯æ·»åŠ å¾®å°çš„äº”è¡Œå›¾æ ‡è£…é¥°
                const Icon = () => {
                    if (type === 'gan') return null;
                    const icons = {'æœ¨':'ğŸŒ²','ç«':'ğŸ”¥','åœŸ':'â›°ï¸','é‡‘':'ğŸ”ª','æ°´':'ğŸ’§'};
                    return <span className="absolute top-0 -right-1 text-[8px] opacity-60 scale-75">{icons[wuxing]}</span>;
                };

                return (
                    <span className="relative font-bold" style={{ color: color }}>
                        {text}
                        <Icon />
                    </span>
                );
            };

            return (
                <div className="min-h-screen flex justify-center py-0 sm:py-8">
                    {/* æ‰‹æœºå®¹å™¨æ¨¡æ‹Ÿ */}
                    <div className="w-full max-w-[400px] bg-z-bg shadow-2xl relative overflow-hidden flex flex-col font-serif">
                        
                        {/* é¡¶éƒ¨å¯¼èˆªæ  */}
                        <header className="bg-black/95 text-z-gold px-4 py-3 pb-6 relative">
                            <div className="flex justify-between items-center mb-5">
                                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" /></svg>
                                <span className="text-xl tracking-[0.2em] font-light opacity-90">é—®çœŸå…«å­—</span>
                                <span className="text-xl tracking-widest">Â·Â·Â·</span>
                            </div>
                            
                            {/* ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ */}
                            <div className="flex items-start gap-3">
                                {/* å¤´åƒåŒº */}
                                <div className="w-14 h-14 rounded-full border border-z-gold/50 p-1 flex-shrink-0">
                                    <div className="w-full h-full bg-[#1a1a1a] rounded-full flex items-center justify-center border border-z-gold/30">
                                        <span className="text-2xl text-z-gold">ğŸ</span>
                                    </div>
                                </div>
                                {/* æ–‡æœ¬åŒº */}
                                <div className="flex-1 space-y-1">
                                    <div className="flex justify-between items-center">
                                        <div className="flex items-center gap-2">
                                            <span className="text-z-gold font-bold text-base">æ¡ˆä¾‹3</span>
                                            <span className="bg-z-gold/20 text-z-gold text-[10px] px-1 rounded border border-z-gold/30">VIP</span>
                                        </div>
                                        <div className="flex gap-3 text-z-gold/70">
                                            <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" /></svg>
                                            <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" /></svg>
                                        </div>
                                    </div>
                                    <div className="text-xs text-gray-400 leading-relaxed font-light">
                                        <p>é˜´å†ï¼š2004å¹´äºŒæœˆåˆå æœªæ—¶ <span className="font-bold text-white ml-1">ä¹¾é€ </span></p>
                                        <p>é˜³å†ï¼š2004å¹´02æœˆ29æ—¥ 13:00:00</p>
                                    </div>
                                </div>
                            </div>
                        </header>

                        {/* æ ¸å¿ƒæ’ç›˜è¡¨æ ¼åŒºåŸŸ */}
                        <div className="bg-white flex-1 overflow-y-auto no-scrollbar">
                            
                            {/* Grid å¸ƒå±€å®¹å™¨ */}
                            <div className="grid grid-cols-5 text-center">
                                
                                {/* 1. æ ‡é¢˜è¡Œ */}
                                <div className="col-span-1 py-2 text-xs text-gray-400 border-b border-gray-100">æ—¥æœŸ</div>
                                {baziData.pillars.map((p, i) => (
                                    <div key={i} className="col-span-1 py-2 text-xs text-gray-400 border-b border-gray-100">{p.name}</div>
                                ))}

                                {/* 2. ä¸»æ˜Ÿ (åç¥) */}
                                <div className="col-span-1 py-2 text-sm text-gray-400 self-center">ä¸»æ˜Ÿ</div>
                                {baziData.pillars.map((p, i) => (
                                    <div key={i} className={`col-span-1 py-2 text-xs ${p.god==='å…ƒç”·' ? 'text-z-red font-bold text-sm' : 'text-gray-600'}`}>
                                        {p.god}
                                    </div>
                                ))}

                                {/* 3. å¤©å¹² */}
                                <div className="col-span-1 py-1 text-sm text-gray-400 self-center font-bold">å¤©å¹²</div>
                                {baziData.pillars.map((p, i) => (
                                    <div key={i} className="col-span-1 py-1 text-2xl font-serif">
                                        <ColorText text={p.gan} type="gan" />
                                        {/* å¤©å¹²ä¸‹æ–¹çš„å°å›¾æ ‡ (ç¤ºä¾‹ï¼šæœ¨åœŸ) */}
                                        <div className="text-[8px] scale-75 text-gray-400 opacity-50 -mt-1">{WUXING[p.gan] === 'æœ¨' ? 'ğŸŒ²' : (WUXING[p.gan] === 'åœŸ' ? 'â›°ï¸' : (WUXING[p.gan] === 'ç«' ? 'ğŸ”¥' : ''))}</div>
                                    </div>
                                ))}

                                {/* 4. åœ°æ”¯ */}
                                <div className="col-span-1 py-1 text-sm text-gray-400 self-center font-bold mt-1">åœ°æ”¯</div>
                                {baziData.pillars.map((p, i) => (
                                    <div key={i} className="col-span-1 py-1 text-2xl font-serif">
                                        <ColorText text={p.zhi} type="zhi" />
                                        <div className="text-[8px] scale-75 text-gray-400 opacity-50 -mt-1">{WUXING[p.zhi] === 'æœ¨' ? 'ğŸŒ²' : (WUXING[p.zhi] === 'åœŸ' ? 'â›°ï¸' : (WUXING[p.zhi] === 'ç«' ? 'ğŸ”¥' : (WUXING[p.zhi] === 'é‡‘' ? 'ğŸ”—' : '')))}</div>
                                    </div>
                                ))}

                                {/* 5. è—å¹² (å¤æ‚å¸ƒå±€ï¼šæ¯è¡Œå¯¹åº”ä¸€ä¸ªè—å¹²) */}
                                <div className="col-span-1 py-3 text-xs text-gray-400 flex flex-col items-center justify-start pt-4 border-b border-gray-50">
                                    <span>è—å¹²</span>
                                    <span className="text-[10px] text-gray-300 mt-1">â—</span>
                                </div>
                                {baziData.pillars.map((p, i) => (
                                    <div key={i} className="col-span-1 py-3 text-xs flex flex-col items-center gap-1 border-b border-gray-50">
                                        {ZANGGAN[p.zhi].map((zg, idx) => (
                                            <span key={idx} style={{color: WUXING_COLOR[WUXING[zg.gan]]}} className={idx === 0 ? "font-bold opacity-100" : "opacity-90"}>
                                                {zg.gan}<span className="text-[9px] opacity-70 ml-[1px]">{WUXING[zg.gan]}</span>
                                            </span>
                                        ))}
                                    </div>
                                ))}

                                {/* 6. å‰¯æ˜Ÿ (è—å¹²å¯¹åº”çš„åç¥) */}
                                <div className="col-span-1 py-3 text-xs text-gray-400 bg-gray-50/50 flex items-start justify-center pt-2">å‰¯æ˜Ÿ</div>
                                {baziData.pillars.map((p, i) => (
                                    <div key={i} className="col-span-1 py-3 text-[10px] text-gray-500 bg-gray-50/50 flex flex-col items-center gap-1 pt-2">
                                        {ZANGGAN[p.zhi].map((zg, idx) => (
                                            <span key={idx}>{GET_TEN_GOD(baziData.dayMaster, zg.gan)}</span>
                                        ))}
                                    </div>
                                ))}

                                {/* 7. æ˜Ÿè¿ */}
                                <div className="col-span-1 py-2 text-xs text-gray-400 border-t border-gray-100">æ˜Ÿè¿</div>
                                {baziData.pillars.map((p, i) => (
                                    <div key={i} className="col-span-1 py-2 text-xs text-gray-700 border-t border-gray-100">{p.star}</div>
                                ))}

                                {/* 8. è‡ªå */}
                                <div className="col-span-1 py-2 text-xs text-gray-400">è‡ªå</div>
                                {baziData.pillars.map((p, i) => (
                                    <div key={i} className="col-span-1 py-2 text-xs text-gray-700">{p.sit}</div>
                                ))}

                                {/* 9. ç©ºäº¡ */}
                                <div className="col-span-1 py-2 text-xs text-gray-400">ç©ºäº¡</div>
                                {baziData.pillars.map((p, i) => (
                                    <div key={i} className="col-span-1 py-2 text-xs text-gray-700">{p.kong}</div>
                                ))}

                                {/* 10. çº³éŸ³ */}
                                <div className="col-span-1 py-2 text-xs text-gray-400">çº³éŸ³</div>
                                {baziData.pillars.map((p, i) => (
                                    <div key={i} className="col-span-1 py-2 text-xs text-gray-700 scale-90 origin-center whitespace-nowrap">
                                        {NAYIN_MAP[p.gan + p.zhi]}
                                    </div>
                                ))}

                                {/* 11. ç¥ç… (é‡‘è‰²å­—ä½“ï¼Œåˆ—è¡¨å±•ç¤º) */}
                                <div className="col-span-1 py-4 text-xs text-gray-400 pt-6">ç¥ç…</div>
                                {baziData.pillars.map((p, i) => (
                                    <div key={i} className="col-span-1 py-4 text-[11px] text-z-gold flex flex-col items-center gap-2 leading-relaxed">
                                        {p.shensha.map((ss, idx) => (
                                            <span key={idx}>{ss}</span>
                                        ))}
                                    </div>
                                ))}
                                
                            </div>

                            {/* åº•éƒ¨ç•™ç™½ï¼Œæ¨¡æ‹ŸAPPåº•éƒ¨ */}
                            <div className="h-12 w-full bg-z-bg/20"></div>
                        </div>

                        {/* åº•éƒ¨å¯¼èˆªæ æ¨¡æ‹Ÿ */}
                        <div className="bg-white border-t border-gray-200 h-14 flex justify-around items-center text-xs text-gray-500">
                             <div className="flex flex-col items-center text-z-red font-bold">
                                <span>â˜¸</span>
                                <span>åŸºæœ¬æ’ç›˜</span>
                             </div>
                             <div className="flex flex-col items-center">
                                <span>ğŸ“œ</span>
                                <span>ä¸“ä¸šç»†ç›˜</span>
                             </div>
                             <div className="flex flex-col items-center">
                                <span>ğŸ“</span>
                                <span>æ–­äº‹ç¬”è®°</span>
                             </div>
                        </div>

                    </div>
                </div>
            );
        };

        // æ¸²æŸ“åº”ç”¨
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
